<!DOCTYPE html>
<html lang="zh">

<head>
	<meta charset="UTF-8">
	<title>知知大冒险</title>
	<style>
		body {
			font-family: "Segoe UI", sans-serif;
			margin: 0;
			background-image: url('firework.jpg');
			background-size: cover;
			background-position: center;
			background-repeat: no-repeat;
			background-attachment: fixed;
		}

		header {
			background: #11284D;
			color: #F4EFDF;
			padding: 20px;
			text-align: center;
		}

		nav {
			background: #101A2C;
			padding: 10px;
			display: flex;
			justify-content: center;
			gap: 20px;
			border-bottom: 1px solid #021024;
		}

		nav a {
			text-decoration: none;
			color: #F4EFDF;
			font-weight: bold;
		}

		.container {
			padding: 20px;
			max-width: 800px;
			margin: auto;
			background: #11284D;
			color: #F4EFDF;
		}

		.section {
			display: none;
		}

		.active {
			display: block;
		}

		textarea {
			width: 100%;
			height: 120px;
		}

		.feed-card {
			background: rgba(255, 255, 255, 0.1);
			padding: 15px;
			border-radius: 12px;
			margin-bottom: 20px;
			backdrop-filter: blur(4px);
			box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
		}

		.feed-card img {
			max-width: 100%;
			border-radius: 10px;
			margin-top: 10px;
		}

		.photo-preview {
			max-width: 100%;
			margin-top: 10px;
		}
	</style>
</head>

<body>

	<header>
		<h1>知知大冒险</h1>
	</header>

	<nav>
		<a href="#" onclick="showSection('home')">主页</a>
		<a href="#" onclick="showSection('diary')">日记</a>
		<a href="#" onclick="showSection('photo')">照片</a>
	</nav>

	<div class="container">

		<!-- 主页 -->
		<div id="home" class="section active">
			<p>"And miles to go before I sleep"</p>
		</div>

		<!-- 日记 -->
		<div id="diary" class="section">
			<h2>写日记</h2>

			<textarea id="diaryText" placeholder="写点什么吧..."></textarea>

			<h3>上传图片</h3>
			<input type="file" id="imageInput" accept="image/*">
			<img id="imagePreview" style="max-width: 200px; display:none; margin-top:10px;">

			<br><br>
			<button onclick="saveDiary()">保存日记</button>

			<h3>日记流</h3>
			<div id="diaryFeed"></div>
		</div>

		<!-- 单独的照片上传 -->
		<div id="photo" class="section">
			<h2>上传照片</h2>
			<input type="file" accept="image/*" onchange="previewPhoto(event)">
			<img id="photoPreview" class="photo-preview">
		</div>

	</div>

	<script>
		function showSection(id) {
			document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
			document.getElementById(id).classList.add('active');
		}

		// ----------------
		// 处理图片预览
		// ----------------
		let currentImageData = null;
		const imageInput = document.getElementById("imageInput");
		const imagePreview = document.getElementById("imagePreview");

		imageInput.addEventListener("change", function () {
			const file = imageInput.files[0];
			if (!file) return;

			const reader = new FileReader();
			reader.onload = function (e) {
				currentImageData = e.target.result;
				imagePreview.src = currentImageData;
				imagePreview.style.display = "block";
			};
			reader.readAsDataURL(file);
		});

		// ----------------
		// 保存日记（仅展示在网页）
		// ----------------
		function saveDiary() {
			const text = document.getElementById('diaryText').value.trim();
			if (!text) return alert("日记内容不能为空");

			const feed = document.getElementById('diaryFeed');
			const card = document.createElement('div');
			card.className = "feed-card";

			let html = `<p>${text.replace(/\n/g, "<br>")}</p>`;

			if (currentImageData) {
				html += `<img src="${currentImageData}">`;
			}

			card.innerHTML = html;
			feed.prepend(card); // 最新的在最上面

			// 清空
			document.getElementById('diaryText').value = "";
			currentImageData = null;
			imagePreview.style.display = "none";
		}

		// 单独的照片上传预览
		function previewPhoto(e) {
			const file = e.target.files[0];
			document.getElementById('photoPreview').src = URL.createObjectURL(file);
		}
	</script>

</body>

</html>